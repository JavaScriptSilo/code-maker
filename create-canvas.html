<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Code Maker</title>
  <link rel="stylesheet" href="createCanvas.css"/>
  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(120deg, #1e3c72, #2a5298, #00c6ff 90%);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .topBar {
      width: 100%;
      height: 60px;
      background-color: #2A2D89;
      display: flex;
      align-items: center;
      padding: 0 30px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    #homelink {
      font-family: "Comic Sans MS", "Comic Sans", cursive;
      font-size: 26px;
      color: #fff;
      text-decoration: none;
    }

    .controls {
      margin-top: 80px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .controls input, .controls button {
      padding: 10px 15px;
      border-radius: 8px;
      border: none;
      font-size: 16px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .controls input {
      width: 200px;
    }

    button {
      background-color: #444;
      color: white;
      cursor: pointer;
      transition: background 0.2s ease-in-out;
    }

    button:hover {
      background-color: #666;
    }

    #codeBox {
      margin-top: 40px;
      max-width: 90%;
      background: rgba(0,0,0,0.4);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    canvas {
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <div class="topBar">
    <a href="index.html" id="homelink">Home</a>
  </div>

  <div class="controls" id="canvasControls">
    <input type="text" id="heightInput" placeholder="Enter Height">
    <button id="setHeight">Set Height</button>
    <input type="text" id="widthInput" placeholder="Enter Width">
    <button id="setWidth">Set Width</button>
    <input type="text" id="backgroundInput" placeholder="Enter Background Color">
    <button id="setBackground">Set Background</button>
    <button id="drawToggle">Toggle Square Drawing</button>
    <button id="clearCanvas">Clear Canvas</button>
  </div>

  <div id="codeBox">
    <p id="codeText"></p>
  </div>

<script>
  // JavaScript unchanged â€” wiring it to the new button IDs
  const canvasWidthDefault = 500;
  const canvasHeightDefault = 300;
  let canvasWidth = canvasWidthDefault;
  let canvasHeight = canvasHeightDefault;
  let canvasBackground = "none";
  let isDrawing = false;
  let squares = [];

  function createBox() {
    const canvas = document.createElement("canvas");
    canvas.id = "myCanvas";
    canvas.width = canvasWidth;
    canvas.height = canvasHeight;
    canvas.style.border = "1px solid black";
    document.body.appendChild(canvas);
  }

  function setupControls() {
    document.getElementById("setHeight").onclick = () => {
      const newHeight = parseInt(document.getElementById("heightInput").value);
      if (!isNaN(newHeight)) {
        canvasHeight = newHeight;
        document.getElementById("myCanvas").height = newHeight;
        createCode();
      }
    };

    document.getElementById("setWidth").onclick = () => {
      const newWidth = parseInt(document.getElementById("widthInput").value);
      if (!isNaN(newWidth)) {
        canvasWidth = newWidth;
        document.getElementById("myCanvas").width = newWidth;
        createCode();
      }
    };

    document.getElementById("setBackground").onclick = () => {
      const color = document.getElementById("backgroundInput").value;
      const canvas = document.getElementById("myCanvas");
      const validColors = new Set(["white","black","red","orange","yellow","green","blue","purple","none"]);
      if (validColors.has(color)) {
        canvas.style.backgroundColor = color === "none" ? "powderblue" : color;
        canvasBackground = color === "none" ? "" : color;
        createCode();
      }
    };

    document.getElementById("drawToggle").onclick = () => {
      isDrawing = !isDrawing;
    };

    document.getElementById("clearCanvas").onclick = () => {
      const canvas = document.getElementById("myCanvas");
      const ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      squares = [];
      createCode();
    };

    document.addEventListener("click", function(e) {
      const canvas = document.getElementById("myCanvas");
      if (!canvas || e.target !== canvas || !isDrawing) return;
      const ctx = canvas.getContext("2d");
      const rectSize = 50;
      const rectX = e.offsetX - rectSize / 2;
      const rectY = e.offsetY - rectSize / 2;

      ctx.fillStyle = "black";
      ctx.fillRect(rectX, rectY, rectSize, rectSize);
      squares.push({x: rectX, y: rectY});
      createCode();
    });
  }

  function createCode() {
    let squareCode = squares.map(sq => `ctx.fillRect(${sq.x}, ${sq.y}, 50, 50);<br>`).join("");
    let code = `&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;&lt;/head&gt;<br>&lt;body&gt;<br>&lt;script&gt;<br>
    const canvas = document.createElement('canvas');<br>
    const ctx = canvas.getContext("2d");<br>
    canvas.width = ${canvasWidth};<br>
    canvas.height = ${canvasHeight};<br>
    canvas.style.backgroundColor = '${canvasBackground}';<br>
    ctx.fillStyle = "black";<br>${squareCode}document.body.appendChild(canvas);<br>
    &lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;`;
    document.getElementById("codeText").innerHTML = code;
  }

  window.onload = () => {
    createBox();
    setupControls();
    createCode();
  };
</script>
</body>
</html>
